CREATE TABLE LOG_BAIXA_RESTAURA (
    ID INTEGER GENERATED BY DEFAULT AS IDENTITY,
    TIPO CHAR(3) NOT NULL,
    BAIXA_RESTAURA CHAR(1) NOT NULL,
    ID_DUPLICATA INTEGER NOT NULL,
    TIPO_DUPLICATA CHAR(1),
    ORDEM_DUPLICATA VARCHAR(5) NOT NULL,
    DATA_HORA TIMESTAMP,
    USUARIO VARCHAR(50),
    VALOR NUMERIC(15,2));

ALTER TABLE LOG_BAIXA_RESTAURA
ADD CONSTRAINT PK_LOG_BAIXA_RESTAURA
PRIMARY KEY (ID);

CREATE TABLE NOTA_ENTRADA_PARCIAL (
    ID INTEGER GENERATED BY DEFAULT AS IDENTITY,
    ID_NOTAENTRADA INTEGER NOT NULL,
    NDUP INTEGER NOT NULL,
    VALOR NUMERIC(15,2),
    USUARIO VARCHAR(50),
    DATA_HORA TIMESTAMP,
    JUROS NUMERIC(15,2),
    DESCONTO NUMERIC(15,2),
    HISTORICO INTEGER,
    CONTA CHAR(5),
    ID_CAIXA INTEGER,
    NUM_CHEQUE INTEGER);

ALTER TABLE NOTA_ENTRADA_PARCIAL
ADD CONSTRAINT PK_NOTA_ENTRADA_PARCIAL
PRIMARY KEY (ID);

ALTER TABLE NOTA_ENTRADA_PARCIAL
ADD CONSTRAINT FK_NOTA_ENTRADA_PARCIAL_1
FOREIGN KEY (ID_NOTAENTRADA,NDUP)
REFERENCES NOTA_ENTRADA_PAGAR(ID_NOTAENTRADA,NDUP)
ON DELETE CASCADE
ON UPDATE CASCADE;

CREATE INDEX NF_ENTRADA_IDX_DATABAIXA
ON NOTA_ENTRADA_PAGAR (BAIXA_DATA);

CREATE INDEX NF_ENTRADA_IDX_VENCTO
ON NOTA_ENTRADA_PAGAR (DVENC);







